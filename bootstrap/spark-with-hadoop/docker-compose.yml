version: '3'
services:
  postgres-db:
    image: postgres
    ports:
      - "5433:5432"
    container_name: "postgres-test"
    environment:
      - POSTGRES_DB=pgdb
      - POSTGRES_PASSWORD=mysecretpassword
      - POSTGRES_USER=postgres_user
  hive-metastore:
    image: "hive-metastore:latest"
    restart: always
    container_name: "hive_metastore"
    hostname: "metastore.hive"
    environment:
      - POSTGRES_PASSWORD=hive
  spear-container:
    image: "spark-standalone-hadoop:latest"
    hostname: "hadoop.spark"
    container_name: "spark"
    restart: always
    ports:
      - "4040:4040"
      - "4041:4041"
      - "8089:8088"
      - "8090:18080"
    expose:
      - "22"
    depends_on:
      - hive-metastore
    privileged: true
    command: "/usr/sbin/init"


